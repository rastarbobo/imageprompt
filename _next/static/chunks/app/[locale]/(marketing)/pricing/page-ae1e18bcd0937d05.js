(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1383],{32117:function(e,i,t){Promise.resolve().then(t.bind(t,74846)),Promise.resolve().then(t.bind(t,30164)),Promise.resolve().then(t.bind(t,41299))},74846:function(e,i,t){"use strict";t.d(i,{default:function(){return b}});var r=t(83009),n=t(45291),s=t(94230),a=t(6043),l=t(97748),c=t(40496),o=t(44834),d=t(7011),m=t(41677),x=t(80229),u=t(16686),p=t(10143),h=t(97528),g=t(31009);function f(e){let{isOpen:i,onClose:t,onConfirm:n,onCancel:s}=e,a=(0,x.useTranslations)();return i?(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-card p-8 rounded-lg shadow-lg w-full max-w-md relative",children:[(0,r.jsx)("button",{onClick:t,className:"absolute right-4 top-4 p-1 hover:bg-accent rounded-md transition-colors","aria-label":"Close dialog",children:(0,r.jsx)(l.Z,{className:"h-5 w-5 text-muted-foreground"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:a("pricing.confirmPurchase")}),(0,r.jsx)("div",{className:"space-y-4 mb-8 text-muted-foreground",children:(0,r.jsx)("p",{className:"text-base leading-relaxed",children:a.rich("pricing.creditsConfirmation",{bold:e=>(0,r.jsx)("strong",{className:"font-semibold text-primary",children:e})})})}),(0,r.jsxs)("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-3",children:[(0,r.jsx)("button",{onClick:s,className:"px-4 py-2 text-sm border border-input text-muted-foreground rounded hover:bg-muted/90 transition-colors",children:a("common.confirmation.cancel")}),(0,r.jsx)("button",{onClick:n,className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded hover:bg-primary/90 transition-colors",children:a("common.confirmation.confirm")})]})]})}):null}function b(e){let{plans:i,currentPlanID:t,userId:b}=e,y=(0,u.usePathname)(),j=(0,x.useLocale)(),N=function(e,i){let{defaultLocale:t}=p.appConfig.i18n;return"en"===e&&""===i?"/":e===t?i:"/".concat(e).concat(i)}(j,y),v=(0,x.useTranslations)(),[P]=(0,n.useState)("monthly"),[T,w]=(0,n.useState)(!1),{trackEvent:k}=(0,d.z)(),{trackUmamiEvent:_}=(0,m.M)(),[I,U]=(0,n.useState)(!1),[E,S]=(0,n.useState)(!1),[z,C]=(0,n.useState)(!1),[O,F]=(0,n.useState)(null),A=i.filter(e=>void 0===e.annualPrice&&"ONETIME_IMAGE_TO_TEXT_POWER_PACK_499"!==e.id),M=i.filter(e=>void 0!==e.annualPrice),Z=i.filter(e=>"ONETIME_IMAGE_TO_TEXT_POWER_PACK_499"===e.id),L=A.some(e=>e.credits>2e3),$=void 0!==t;(0,n.useEffect)(()=>{(async()=>{b&&S(null!==await (0,g.XF)(b))})()},[b]);let R=async e=>{if(b){if("free"===e.id){_("click_to_free_get_started");let e="https://imageprompt.org";if(e){let i="en"===j?"":"/".concat(j,"/"),t=e.replace(/\/$/,""),r="".concat(t).concat(i);window.location.href=r;return}}else{if(L){F(e),C(!0);return}G(e)}}else w(!0)},G=async e=>{if(t&&e.isSubscription)try{U(!0);let i=await fetch("/api/upgrade",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetPlanId:e.id,locale:j})}),r=(await i.json()).portal_url;if(r){_("go_to_upgrade_portal",{plan:t+"->"+e.id}),window.location.href=r;return}throw Error("Upgrade response failed")}catch(i){_("upgrade_response_failed_"+e.oneTimePriceId),console.error("Error during upgrade process:",i),U(!1);return}try{var i,r;U(!0);let t=e.isSubscription?"zh"===j?null!==(i=e.cnyMonthlyPriceId)&&void 0!==i?i:e.cnyAnnualPriceId:null!==(r=e.monthlyPriceId)&&void 0!==r?r:e.annualPriceId:"zh"===j?e.cnyOneTimePriceId:e.oneTimePriceId;if(_("click_to_checkout_"+t,{plan:e.name}),!t)throw Error("Price ID is missing");let n=e.isSubscription,s=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:t,locale:j,isSubscription:n})});if(s.ok){k("go_to_checkout",{plan:e.name});let i=(await s.json()).checkout_url;_("go_to_checkout",{plan:e.name,priceId:e.oneTimePriceId,checkout_url:i}),window.location.href=i}else throw _("checkout_response_failed_"+e.oneTimePriceId),Error("Checkout request failed")}catch(i){_("checkout_process_failed_"+e.oneTimePriceId),console.error("Error during checkout process:",i)}finally{U(!1)}},X=()=>{var e,r;let n=i.find(e=>e.id===t);return null!==(r=null!==(e=null==n?void 0:n.monthlyPrice)&&void 0!==e?e:null==n?void 0:n.annualPrice)&&void 0!==r?r:0},B=e=>"SUBSCRIPTION_ULTIMATE"===e||"SUBSCRIPTION_ULTIMATE_ANNUAL"===e;return(0,r.jsxs)("div",{className:"relative",children:[I&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-4",children:(0,r.jsx)(s.Z,{className:"w-8 h-8 animate-spin text-primary"})})}),(0,r.jsxs)("div",{className:"mx-auto max-w-[1440px]",children:[(0,r.jsx)("div",{className:"isolate mx-auto mt-6 grid grid-cols-1 gap-4 md:grid-cols-2 ".concat(3===i.length?"lg:grid-cols-3":"lg:grid-cols-4"),children:A.map(e=>{var i;return(0,r.jsxs)("div",{className:"\n                rounded p-8 ring-1 bg-muted \n                ".concat(e.isPopular?"ring-2 ring-primary":"ring-gray-200"," \n                relative \n                transition-all duration-300 ease-in-out\n                hover:shadow-lg hover:-translate-y-1\n              "),children:[e.isPopular&&(0,r.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-primary px-4 py-1 text-sm font-semibold text-white shadow-lg",children:v("pricing.mostPopular")})}),(0,r.jsx)("div",{className:"flex items-center justify-between mt-4",children:(0,r.jsx)("h3",{id:"tier-".concat(e.id),className:"text-lg font-semibold leading-8 ".concat(e.isPopular?"text-primary":"text-muted-foreground"),children:e.name})}),(0,r.jsxs)("p",{className:"mt-6 flex items-baseline gap-x-1",children:[(0,r.jsxs)("span",{className:"text-4xl font-bold tracking-tight text-secondary-foreground",children:["zh"===j?"\xa5":"$",e.isSubscription?"monthly"===P?"zh"===j?e.cnyMonthlyPrice:e.monthlyPrice:"zh"===j?e.cnyAnnualPrice:e.annualPrice:$?((null!==(i="zh"===j?e.cnyOneTimePrice:e.oneTimePrice)&&void 0!==i?i:0)*.49999).toFixed(2):"zh"===j?e.cnyOneTimePrice:e.oneTimePrice]}),e.isSubscription&&(0,r.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:["/ ",v("pricing.month")]}),L&&$&&(0,r.jsxs)("span",{className:"text-xl text-muted-foreground line-through ml-2",children:["zh"===j?"\xa5":"$","zh"===j?e.cnyOneTimePrice:e.oneTimePrice]})]}),(0,r.jsxs)("span",{className:"mt-2 text-sm font-semibold leading-6 ".concat("free"===e.id?"text-muted-foreground":"text-primary"),children:["free"===e.id&&(0,r.jsxs)(r.Fragment,{children:[v("pricing.imageToTextUses",{count:e.dailyImageToTextLimit})," / ",v("pricing.day")]}),e.packUsage&&e.packUsage>0&&e.packUsage<1e4&&(0,r.jsxs)(r.Fragment,{children:[v("pricing.imageToTextUses",{count:e.packUsage})," / ",v("pricing.month")]}),e.packUsage&&e.packUsage>1e4&&(0,r.jsx)(r.Fragment,{children:v("pricing.unlimitedImageToTextUses")}),!e.isSubscription&&"free"!==e.id&&e.credits>0&&(0,r.jsxs)(r.Fragment,{children:[e.credits," ",v("pricing.creditForImageGeneration")]})]}),(0,r.jsx)("button",{onClick:()=>R(e),disabled:I||!!b&&(e.id===t||e.isSubscription&&null!=e.monthlyPrice&&e.monthlyPrice<=X()),"aria-describedby":"tier-".concat(e.id),className:"mt-6 block w-full rounded py-2 px-3 text-center text-sm font-semibold leading-6 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary ".concat(e.isPopular?"bg-primary text-white hover:shadow hover:bg-primary-600":"text-primary ring-1 ring-inset ring-gray-200 hover:shadow hover:bg-primary/10"," ").concat(t&&(e.id===t||e.isSubscription&&null!=e.monthlyPrice&&e.monthlyPrice<=X())?"opacity-50 cursor-not-allowed":""),children:t?e.id===t?v("pricing.currentPlan"):e.isSubscription&&null!=e.monthlyPrice&&e.monthlyPrice>X()?v("pricing.upgrade"):e.buttonText:e.buttonText}),"zh"===j&&e.isSubscription&&(0,r.jsx)("div",{className:"mt-2 text-center text-sm text-muted text-muted-foreground",children:"支持人民币信用卡支付"}),"zh"===j&&!e.isSubscription&&"free"!==e.id&&(0,r.jsx)("div",{className:"mt-2 text-center text-sm text-muted text-muted-foreground",children:"支持支付宝微信支付"}),(0,r.jsx)("ul",{className:"mt-8 space-y-3 text-sm leading-6 text-secondary-foreground",children:e.features.map((e,i)=>(0,r.jsxs)("li",{className:"flex items-center gap-x-3",children:[e.isEnabled?(0,r.jsx)(a.Z,{className:"h-5 w-5 flex-shrink-0 text-green-500"}):(0,r.jsx)(l.Z,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),e.link&&(0,r.jsx)(h.rU,{href:e.link,className:"underline hover:text-blue-600",children:e.replaceFeatureName?e.text.replace("{imageToPrompt}",v("common.menu.imageToPrompt")).replace("{describeImage}",v("common.menu.describeImage")):e.text}),!e.link&&(0,r.jsx)("span",{className:e.isUnlimited?"text-primary":"",children:e.replaceFeatureName?e.text.replace("{imageToPrompt}",v("common.menu.imageToPrompt")).replace("{describeImage}",v("common.menu.describeImage")):e.text})]},i))})]},e.id)})}),M.length>0&&(0,r.jsx)("div",{className:"mt-8",children:M.map(e=>{var i;return(0,r.jsx)("div",{className:"w-full rounded p-8 bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-primary",children:e.name})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-4xl font-bold text-secondary-foreground",children:["zh"===j?"\xa5":"$",((null!==(i="zh"===j?e.cnyAnnualPrice:e.annualPrice)&&void 0!==i?i:0)/12).toFixed(2),(0,r.jsxs)("span",{className:"text-sm font-normal text-muted-foreground",children:["/",v("pricing.month")]})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:v("pricing.billedAnnually",{amount:"".concat("zh"===j?"\xa5"+e.cnyAnnualPrice:"$"+e.annualPrice)})})]}),(0,r.jsx)("div",{className:"text-sm font-semibold text-primary",children:e.packUsage&&e.packUsage>1e4&&(0,r.jsx)(r.Fragment,{children:v("pricing.unlimitedImageToTextUses")})})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-1",children:e.features.map((e,i)=>(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[e.isEnabled?(0,r.jsx)(a.Z,{className:"h-5 w-5 flex-shrink-0 text-green-500"}):(0,r.jsx)(l.Z,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),(0,r.jsx)("span",{className:e.isUnlimited?"text-primary":"",children:e.replaceFeatureName?e.text.replace("{imageToPrompt}",v("common.menu.imageToPrompt")).replace("{describeImage}",v("common.menu.describeImage")):e.text})]},i))}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("button",{onClick:()=>R(e),disabled:I||!!b&&e.id===t,className:"md:w-48 rounded bg-primary text-white py-2 px-4 font-semibold hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?e.id===t?v("pricing.currentPlan"):v("pricing.upgrade"):e.buttonText}),"zh"===j&&(0,r.jsx)("div",{className:"mt-2 text-center text-sm text-muted text-muted-foreground",children:"支持人民币信用卡支付"})]})]})},"annual-".concat(e.id))})}),Z.length>0&&(0,r.jsx)("div",{className:"mt-0",children:Z.map(e=>{let i="zh"===j?e.cnyOneTimePrice:e.oneTimePrice,n=($?(null!=i?i:0)*.499:null!=i?i:0).toFixed(2),s=null!=i?i:0;return(0,r.jsx)("div",{className:"w-full rounded p-8 bg-muted border ring-2 ring-primary hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("h3",{className:"text-xl font-bold text-primary",children:e.name})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,r.jsxs)("p",{className:"text-4xl font-bold text-secondary-foreground",children:["zh"===j?"\xa5":"$",n]}),$&&(0,r.jsxs)("p",{className:"text-xl text-muted-foreground line-through",children:["zh"===j?"\xa5":"$",s]})]}),(0,r.jsx)("div",{className:"text-sm font-semibold text-primary",children:e.packUsage&&(0,r.jsx)(r.Fragment,{children:v("pricing.imageToTextUses",{count:e.packUsage})})}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:v("pricing.validFor3days")})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 ml-0 md:ml-24",children:e.features.map((e,i)=>(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[e.isEnabled?(0,r.jsx)(a.Z,{className:"h-5 w-5 flex-shrink-0 text-green-500"}):(0,r.jsx)(l.Z,{className:"h-5 w-5 flex-shrink-0 text-red-500"}),(0,r.jsx)("span",{className:e.isUnlimited?"text-primary":"",children:e.replaceFeatureName?e.text.replace("{imageToPrompt}",v("common.menu.imageToPrompt")).replace("{describeImage}",v("common.menu.describeImage")):e.text})]},i))}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("button",{onClick:()=>R(e),disabled:I||!!b&&(e.id===t||B(t)||E),className:"md:w-48 rounded bg-primary text-white py-2 px-4 font-semibold hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E?v("pricing.activePowerPackExisted"):e.buttonText}),"zh"===j&&(0,r.jsx)("div",{className:"mt-2 text-center text-sm text-muted text-muted-foreground",children:"支持支付宝微信支付"})]})]})},"power-pack-".concat(e.id))})})]}),(0,r.jsx)(f,{isOpen:z,onClose:()=>C(!1),onConfirm:()=>{C(!1),O&&G(O)},onCancel:()=>C(!1)}),(0,r.jsx)(c.u,{isOpen:T,onClose:()=>w(!1),children:(0,r.jsx)(o.LoginForm,{redirectToURL:N})})]})}}},function(e){e.O(0,[342,4434,6083,229,6587,4223,6770,9453,6409,943,6479,4335,1744],function(){return e(e.s=32117)}),_N_E=e.O()}]);