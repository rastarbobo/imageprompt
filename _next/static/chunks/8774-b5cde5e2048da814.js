"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8774],{11138:function(e,t,a){a.d(t,{K:function(){return l}});var r=a(83009),n=a(37384),i=a(41677),o=a(80229),s=a(97528);function l(e){let{resetTime:t,onClose:a}=e,l=(0,o.useTranslations)(),c=(0,o.useFormatter)().dateTime(t,{hour:"numeric",minute:"numeric",month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),{trackUmamiEvent:d}=(0,i.M)();return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:l("imageToPrompt.dailyLimitReached.title")}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground space-y-2",children:[(0,r.jsx)("p",{children:l("imageToPrompt.dailyLimitReached.description",{date:c})}),(0,r.jsx)("p",{children:l("imageToPrompt.dailyLimitReached.upgradeOrPowerPack2025")})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,r.jsx)(n.z,{variant:"outline",className:"rounded",onClick:a,children:l("imageToPrompt.dailyLimitReached.gotIt")}),(0,r.jsx)(s.rU,{href:"/pricing",onClick:()=>{d("daily_limit_reached_upgrade_clicked"),a()},children:(0,r.jsx)(n.z,{className:"rounded",children:l("imageToPrompt.dailyLimitReached.viewDetails")})})]})]})}},51138:function(e,t,a){var r,n,i,o;a.d(t,{Or:function(){return r},cs:function(){return n}}),(i=r||(r={})).ONE_TIME_PURCHASE="ONE_TIME_PURCHASE",i.SUBSCRIPTION="SUBSCRIPTION",(o=n||(n={}))[o.GENERAL=0]="GENERAL",o[o.FLUX=1]="FLUX",o[o.MIDJOURNEY=2]="MIDJOURNEY",o[o.STABLE_DIFFUSION=3]="STABLE_DIFFUSION"},98997:function(e,t,a){var r=a(83009);a(45291);let n=[{code:"en",name:"English"},{code:"es",name:"Espa\xf1ol"},{code:"fr",name:"Fran\xe7ais"},{code:"de",name:"Deutsch"},{code:"zh",name:"简体中文"},{code:"zh-TW",name:"繁體中文"},{code:"ko",name:"한국어"},{code:"ru",name:"Русский"},{code:"ja",name:"日本語"},{code:"it",name:"Italiano"},{code:"pt",name:"Portugu\xeas"},{code:"ar",name:"العربية"},{code:"hi",name:"हिन्दी"},{code:"tr",name:"T\xfcrk\xe7e"},{code:"vi",name:"Tiếng Việt"},{code:"id",name:"Bahasa Indonesia"}];t.Z=e=>{let{value:t,onChange:a,className:i=""}=e;return(0,r.jsx)("div",{className:"flex items-center h-full",children:(0,r.jsx)("select",{value:t||n[0].code,onChange:e=>a(e.target.value),className:"w-full p-2 border rounded text-muted-foreground bg-muted\n                    flex items-center justify-center\n                    appearance-none cursor-pointer\n                    ".concat(i),style:{lineHeight:"normal"},"aria-label":"Select language",children:n.map(e=>(0,r.jsx)("option",{value:e.code,children:e.name},e.code))})})}},94721:function(e,t,a){a.d(t,{l:function(){return c}});var r=a(83009),n=a(27519),i=a(50249),o=a(97528),s=a(80229),l=a(51138);function c(e){let{balance:t,nextResetTime:a}=e,c=(0,s.useTranslations)(),d=(0,s.useFormatter)();if(-1==t.dailyLimit)return(0,r.jsx)("div",{className:"text-muted-foreground",children:"Loading..."});let m=t.packsBalance.some(e=>e.source===l.Or.SUBSCRIPTION&&e.initialAmount>1e4),u=m?c("imageToPrompt.usageStats.unlimited"):"".concat(t.dailyUsage,"/").concat(t.dailyLimit),p=d.dateTime(a,{hour:"numeric",minute:"numeric",month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),h=t.packsBalance.find(e=>e.source===l.Or.SUBSCRIPTION),f=t.packsBalance.find(e=>e.source===l.Or.ONE_TIME_PURCHASE);return(0,r.jsx)(n.pn,{delayDuration:0,disableHoverableContent:!1,children:(0,r.jsxs)("div",{className:"flex flex-col gap-2.5",children:[(!h||h.remainingAmount<=0)&&(0,r.jsxs)("div",{className:"flex items-center gap-2.5 text-sm",children:[(0,r.jsxs)("span",{className:"text-muted-foreground whitespace-nowrap",children:[c("imageToPrompt.usageStats.usesToday")," : ",u]}),!m&&(0,r.jsxs)(n.u,{children:[(0,r.jsx)(n.aJ,{asChild:!0,children:(0,r.jsx)("button",{type:"button",className:"touch-none",onClick:e=>e.preventDefault(),children:(0,r.jsx)(i.pjG,{className:"h-3.5 w-3.5 cursor-help opacity-30 hover:opacity-100 transition-opacity"})})}),(0,r.jsx)(n._v,{side:"top",className:"p-2",sideOffset:5,onPointerDownOutside:e=>e.preventDefault(),children:(0,r.jsx)("p",{className:"text-sm",children:c("imageToPrompt.usageStats.usageWillResetAt",{date:p})})})]}),!m&&(0,r.jsx)(o.rU,{href:"/pricing",className:"text-primary text-sm hover:underline whitespace-nowrap",children:c("imageToPrompt.usageStats.getMoreUses")})]}),h&&!m&&(0,r.jsxs)("div",{className:"flex items-center gap-2.5 text-sm",children:[(0,r.jsxs)("span",{className:"text-muted-foreground whitespace-nowrap",children:[c("imageToPrompt.usageStats.subscriptionUses")," : ",h.initialAmount-h.remainingAmount,"/",h.initialAmount]}),h.expiresAt&&(0,r.jsxs)(n.u,{children:[(0,r.jsx)(n.aJ,{asChild:!0,children:(0,r.jsx)("button",{type:"button",className:"touch-none",onClick:e=>e.preventDefault(),children:(0,r.jsx)(i.pjG,{className:"h-3.5 w-3.5 cursor-help opacity-30 hover:opacity-100 transition-opacity"})})}),(0,r.jsx)(n._v,{side:"top",className:"p-2",sideOffset:5,onPointerDownOutside:e=>e.preventDefault(),children:(0,r.jsx)("p",{className:"text-sm",children:c("imageToPrompt.usageStats.subscriptionRenewsAt",{date:d.dateTime(h.expiresAt,{hour:"numeric",minute:"numeric",month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})})})})]})]}),m&&(0,r.jsx)("div",{className:"flex items-center gap-2.5 text-sm",children:(0,r.jsxs)("span",{className:"text-muted-foreground whitespace-nowrap",children:[c("imageToPrompt.usageStats.subscriptionUses")," : ",c("imageToPrompt.usageStats.unlimited")]})}),f&&f.initialAmount>0&&(0,r.jsxs)("div",{className:"flex items-center gap-2.5 text-sm",children:[(0,r.jsxs)("span",{className:"text-muted-foreground whitespace-nowrap",children:["Power Pack : ",f.initialAmount-f.remainingAmount,"/",f.initialAmount]}),f.expiresAt&&(0,r.jsxs)(n.u,{children:[(0,r.jsx)(n.aJ,{asChild:!0,children:(0,r.jsx)("button",{type:"button",className:"touch-none",onClick:e=>e.preventDefault(),children:(0,r.jsx)(i.pjG,{className:"h-3.5 w-3.5 cursor-help opacity-30 hover:opacity-100 transition-opacity"})})}),(0,r.jsx)(n._v,{side:"top",className:"p-2",sideOffset:5,onPointerDownOutside:e=>e.preventDefault(),children:(0,r.jsx)("p",{className:"text-sm",children:c("imageToPrompt.usageStats.powerPackExpiresAt",{date:d.dateTime(f.expiresAt,{hour:"numeric",minute:"numeric",month:"short",day:"numeric",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})})})})]})]})]})})}},99562:function(e,t,a){a.d(t,{Ix:function(){return i},M6:function(){return l},ON:function(){return s},SN:function(){return o}});var r=a(6335);class n extends Error{constructor(e){super(e),this.name="UnauthorizedError"}}let i=async(e,t,a,n)=>{let i=e;a&&n&&(i=await (0,r.tg)(e,a,n));let o=new FormData;o.append("file",i),o.append("prefix",t),console.log("Sending request to /api/image/upload");let s=await fetch("/api/image/upload",{method:"POST",body:o});if(console.log("Response received:",s),!s.ok)throw Error("Failed to upload image");let l=await s.json();if(console.log("Uploaded image URL:",l),"string"!=typeof l.url)throw Error("Invalid response format: missing or invalid URL");return l.url},o=async(e,t,a)=>{let r=await fetch("/api/ai/prompts/image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64Url:e,imageModelId:t,language:a})});if(!r.ok){if(451==r.status)throw Error("This image contains inappropriate content and cannot be processed.");if(429==r.status)throw Error("Too many requests, Please try again later.");if(401==r.status)throw new n("Login required");if(402==r.status)throw Error("Daily prompt limit exceeded. Please upgrade your plan.");throw Error("Failed to generate prompt, please try later.")}let i=await r.json();if(!("object"==typeof i&&null!==i&&"prompt"in i&&"string"==typeof i.prompt))throw Error("Invalid response format: invalid PromptData");return i},s=async(e,t,a,r,n)=>{let i=await fetch("/api/ai/images/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,image_size:t,num_inference_steps:20,page:a,model:r,is_public:n})});if(!i.ok){if(console.log(i),402==i.status)throw Error("Insufficient credit. Subscribe to get more credits.");if(451==i.status)throw Error("Image generation request denied due to content policy violation");throw Error("Service is busy, please try later.")}let o=await i.json();if(!("object"==typeof o&&null!==o&&"url"in o&&"string"==typeof o.url))throw Error("Invalid response format: invalid GeneratedImageData");return o},l=async(e,t,a,r)=>{let i=await fetch("/api/ai/images/describe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({base64Url:e,instruction:t,prompt:a,language:r})});if(!i.ok){if(451==i.status)throw Error("This image or question contains inappropriate content and cannot be processed.");if(401==i.status)throw new n("Login required");if(402==i.status)throw Error("Daily prompt limit exceeded. Please upgrade your plan.");throw Error("Failed to describe image, please try later.")}let o=await i.json();if(!("object"==typeof o&&null!==o&&"result"in o&&"string"==typeof o.result))throw Error("Invalid response format: invalid ResultData");return o}},19375:function(e,t,a){function r(e){return!!e.packsBalance.some(e=>e.remainingAmount>0)||e.dailyUsage<e.dailyLimit}function n(e,t){return Math.max(0,e.dailyLimit-e.dailyUsage)+e.packsBalance.reduce((e,t)=>t.remainingAmount>0&&(!t.expiresAt||t.expiresAt>new Date)?e+t.remainingAmount:e,0)>=t}function i(){let e=new Date,t=new Date(e);return t.setUTCHours(8,0,0,0),e.getUTCHours()>=8&&t.setDate(t.getDate()+1),t}a.d(t,{$R:function(){return n},BA:function(){return r},EJ:function(){return i}}),a(51138)},6335:function(e,t,a){a.d(t,{tg:function(){return n},w8:function(){return r}});let r=e=>new Promise((t,a)=>{let r=new FileReader;r.onloadend=()=>t(r.result),r.onerror=a,r.readAsDataURL(e)}),n=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"webp";return new Promise((n,i)=>{let o=new Image;o.onload=()=>{let e=o.width,s=o.height,l=Math.min(t/e,a/s,1);e=Math.floor(e*l),s=Math.floor(s*l);let c=document.createElement("canvas");c.width=e,c.height=s;let d=c.getContext("2d");d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high",null==d||d.drawImage(o,0,0,e,s),c.toBlob(e=>{e?n(e):i(Error("Failed to create resized image"))},"image/".concat(r),.95)},o.onerror=e=>{console.error("Image load error:",e);let t="Unknown error";if(e instanceof Event){let a=e.target;if(a&&(a.complete?(0===a.naturalHeight||0===a.naturalWidth)&&(t="Invalid or corrupted image resource"):t="Image loading incomplete","error"in a))switch(a.error.code){case 1:t="Loading process was aborted";break;case 2:t="Network error";break;case 3:t="Image decoding error";break;case 4:t="Invalid or unsupported image source"}}else"string"==typeof e?t=e:e&&"object"==typeof e&&"message"in e&&(t=String(e.message));i(Error("Image loading failed: ".concat(t)))},o.src=URL.createObjectURL(e)})}},27519:function(e,t,a){a.d(t,{_v:function(){return d},aJ:function(){return c},pn:function(){return s},u:function(){return l}});var r=a(83009),n=a(55019),i=a(45291),o=a(89988);let s=n.zt,l=n.fC,c=n.xz,d=i.forwardRef((e,t)=>{let{className:a,sideOffset:i=4,...s}=e;return(0,r.jsx)(n.VY,{ref:t,sideOffset:i,className:(0,o.cn)("bg-popover text-popover-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md border px-3 py-1.5 text-sm shadow-md",a),...s})});d.displayName=n.VY.displayName}}]);